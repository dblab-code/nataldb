<!DOCTYPE html>
<html>
  <head>
    <title>DBServer</title>
  </head>
  <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <body style="margin : 0px; overflow: hidden;">
    <a-scene
      embedded
      arjs="debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
      light="defaultLightsEnabled: true"
    >
      <a-assets>
        <a-asset-item
          id="tree-obj"
          src="https://cdn.glitch.com/008c284a-f4ae-491a-aae4-1de537fa7849%2Fcenario_TodoAzul_NovasCaixas.obj?v=1575998226463"
        ></a-asset-item>
        <audio
          id="sound"
          src="https://cdn.glitch.com/008c284a-f4ae-491a-aae4-1de537fa7849%2Ffrozen-let-it-go-chorus-only.mp3"
          preload="auto"
        ></audio>
        <a-asset-item
          id="tree-mtl"
          src="https://cdn.glitch.com/008c284a-f4ae-491a-aae4-1de537fa7849%2Fcenario_TodoAzul_NovasCaixas.mtl?v=1575998224880"
        ></a-asset-item>
        <a-asset-item
          id="db-mtl"
          src="https://cdn.glitch.com/008c284a-f4ae-491a-aae4-1de537fa7849%2FlogoDB.mtl?v=1575985858437"
        ></a-asset-item>
        <a-asset-item
          id="db-obj"
          src="https://cdn.glitch.com/008c284a-f4ae-491a-aae4-1de537fa7849%2FlogoDB.obj?v=1575985858846"
        ></a-asset-item>
      </a-assets>
    <a-marker type="pattern"
url="https://raw.githubusercontent.com/larissayasin/a-frame-db/master/markers/pattern-dblogo.patt">
        <a-obj-model
          src="#tree-obj"
          mtl="#tree-mtl"
          sound="src: #sound; autoplay: false"
          soundhandler
        ></a-obj-model>
        <a-obj-model
          src="#db-obj"
          mtl="#db-mtl"
          position="0 1.7 0"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 6000"
        ></a-obj-model>
        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: 0 1.8 0; to: 0 0 0; loop: true; easing: linear; delay: 1000"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 3000; from: 0.35 1.8 0; to: 0.35 0 0; loop: true; easing: linear; delay: 900"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: -0.25 1.8 0; to: -0.25 0 0; loop: true; easing: linear; delay: 0"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: 0 1.8 -0.5; to: 0 0 -0.5; loop: true; easing: linear; delay: 1200"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: -0.15 1.8 0.5; to: -0.15 0 0.5; loop: true; easing: linear; delay: 800"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: 0 1.8 0.25; to: 0 0 0.25; loop: true; easing: linear; delay: 700"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: 0.25 1.8 -0.25; to: 0.25 0 -0.25; loop: true; easing: linear; delay: 100"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: -0.25 1.8 -0.25; to: -0.25 0 -0.25; loop: true; easing: linear; delay: 0"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 3000; from: 0 1.8 -0.25; to: 0 0 -0.25; loop: true; easing: linear; delay: 1000"
        >
        </a-sphere>

        <a-sphere
          color="white"
          radius="0.015"
          animation="property: position; dur: 5000; from: 0.25 1.8 0.25; to: 0.25 0 0.25; loop: true; easing: linear; delay: 1200"
        >
        </a-sphere>
      </a-marker>
      <!--       <a-entity sound="src: #sound" autoplay="true"></a-entity> -->
      <a-entity camera></a-entity>
    </a-scene>
    <script>
      AFRAME.registerComponent("soundhandler", {
        tick: function() {
          var entity = document.querySelector("[sound]");
          if (document.querySelector("a-marker").object3D.visible == true) {
            entity.components.sound.playSound();
            console.log("play");
          } else {
            entity.components.sound.pauseSound();
            console.log("pause");
          }
        }
      });
    </script>
  </body>
</html>
